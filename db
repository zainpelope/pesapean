CREATE DATABASE sapi_auction;
USE sapi_auction;

-- Tabel users
CREATE TABLE users (
    id_user INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50),
    email VARCHAR(100),
    password VARCHAR(100),
    role VARCHAR(20),
    createdAt DATETIME,
    updateAt DATETIME
);

-- Tabel home
CREATE TABLE home (
    id_home INT PRIMARY KEY AUTO_INCREMENT,
    sejarah TEXT,
    gambar VARCHAR(255)
);

-- Tabel role (opsional, bisa berupa ENUM di tabel users)
-- Sudah dicakup di kolom 'role' users

-- Tabel macamSapi
CREATE TABLE macamSapi (
    id_macamSapi INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100)
);

-- Tabel data_sapi
CREATE TABLE data_sapi (
    id_sapi INT PRIMARY KEY AUTO_INCREMENT,
    id_macamSapi INT,
    foto_sapi VARCHAR(255),
    harga_sapi INT,
    nama_pemilik VARCHAR(100),
    alamat_pemilik VARCHAR(255),
    nomor_pemilik VARCHAR(20),
    email_pemilik VARCHAR(100),
    createdAt DATETIME,
    updatedAt DATETIME,
    FOREIGN KEY (id_macamSapi) REFERENCES macamSapi(id_macamSapi)
);

-- Tabel lelang
CREATE TABLE lelang (
    id_lelang INT PRIMARY KEY AUTO_INCREMENT,
    id_sapi INT,
    harga_awal INT,
    harga_tertinggi INT,
    id_penawaranTertinggi INT,
    batas_waktu DATETIME,
    status VARCHAR(50),
    createdAt DATETIME,
    updatedAt DATETIME,
    FOREIGN KEY (id_sapi) REFERENCES data_sapi(id_sapi)
);

-- Tabel Penawaran
CREATE TABLE Penawaran (
    id_penawaran INT PRIMARY KEY AUTO_INCREMENT,
    id_lelang INT,
    harga_tawaran INT,
    waktu_tawaran DATETIME,
    FOREIGN KEY (id_lelang) REFERENCES lelang(id_lelang)
);

-- Tabel chatRooms
CREATE TABLE chatRooms (
    id_chatRooms INT PRIMARY KEY AUTO_INCREMENT,
    id_sapi INT,
    nama_pengirim VARCHAR(100),
    createdAt DATETIME,
    updatedAt DATETIME,
    FOREIGN KEY (id_sapi) REFERENCES data_sapi(id_sapi)
);

-- Tabel chatMessage
CREATE TABLE chatMessage (
    id_message INT PRIMARY KEY AUTO_INCREMENT,
    id_chatRooms INT,
    pesan TEXT,
    waktu_kirim DATETIME,
    FOREIGN KEY (id_chatRooms) REFERENCES chatRooms(id_chatRooms)
);

-- Tabel sapiSonok
CREATE TABLE sapiSonok (
    id INT PRIMARY KEY AUTO_INCREMENT,
    id_sapi INT,
    nama_sapi VARCHAR(100),
    umur VARCHAR(50),
    lingkar_dada VARCHAR(50),
    panjang_badan VARCHAR(50),
    tinggi_pundak VARCHAR(50),
    tinggi_punggung VARCHAR(50),
    panjang_wajah VARCHAR(50),
    lebar_punggul VARCHAR(50),
    lebar_dada VARCHAR(50),
    tinggi_kaki VARCHAR(50),
    kesehatan VARCHAR(100),
    generasiSatu INT,
    generasiDua INT,
    FOREIGN KEY (id_sapi) REFERENCES data_sapi(id_sapi)
);

-- Tabel sapiKerap
CREATE TABLE sapiKerap (
    id_sapi INT PRIMARY KEY,
    nama_sapi VARCHAR(100),
    ketahanan_fisik VARCHAR(100),
    kecepatan_lari VARCHAR(100),
    penghargaan VARCHAR(100),
    FOREIGN KEY (id_sapi) REFERENCES data_sapi(id_sapi)
);

-- Tabel sapiTermak
CREATE TABLE sapiTermak (
    id_sapi INT PRIMARY KEY,
    nama_sapi VARCHAR(100),
    kesuburan VARCHAR(100),
    riwayat_kesehatan VARCHAR(100),
    FOREIGN KEY (id_sapi) REFERENCES data_sapi(id_sapi)
);

-- Tabel sapiTangeh
CREATE TABLE sapiTangeh (
    id INT PRIMARY KEY AUTO_INCREMENT,
    id_sapi INT,
    tinggi_badan VARCHAR(50),
    panjang_badan VARCHAR(50),
    lingkar_dada VARCHAR(50),
    bobot_badan VARCHAR(50),
    intensitas_latihan VARCHAR(100),
    jarak_latihan VARCHAR(100),
    prestasi VARCHAR(100),
    kesehatan VARCHAR(100),
    FOREIGN KEY (id_sapi) REFERENCES data_sapi(id_sapi)
);

-- Tabel sapiPotong
CREATE TABLE sapiPotong (
    id INT PRIMARY KEY AUTO_INCREMENT,
    id_sapi INT,
    nama_sapi VARCHAR(100),
    berat_badan VARCHAR(50),
    persentase_daging VARCHAR(50),
    FOREIGN KEY (id_sapi) REFERENCES data_sapi(id_sapi)
);

-- Tabel generasiSatu
CREATE TABLE generasiSatu (
    id INT PRIMARY KEY AUTO_INCREMENT,
    sapiSonok INT,
    namaPejantanGenerasiSatu VARCHAR(100),
    jenisPejantanGenerasiSatu VARCHAR(100),
    namaIndukGenerasiSatu VARCHAR(100),
    jenisIndukGenerasiSatu VARCHAR(100),
    namaKakekPejantanGenerasiSatu VARCHAR(100),
    updatedAt DATETIME,
    FOREIGN KEY (sapiSonok) REFERENCES sapiSonok(id)
);

-- Tabel generasiDua
CREATE TABLE generasiDua (
    id INT PRIMARY KEY AUTO_INCREMENT,
    sapiSonok INT,
    namaPejantanGenerasiDua VARCHAR(100),
    jenisPejantanGenerasiDua VARCHAR(100),
    namaIndukGenerasiDua VARCHAR(100),
    jenisIndukGenerasiDua VARCHAR(100),
    jenisKakekPejantanGenerasiDua VARCHAR(100),
    namaNenekIndukGenerasiDua VARCHAR(100),
    createdAt DATETIME,
    updatedAt DATETIME,
    FOREIGN KEY (sapiSonok) REFERENCES sapiSonok(id)
);
